<div class="fixed-bg"></div>

<div *ngIf="loading" class="text-primary-100 text-center p-10">Cargando vino...</div>

<div *ngIf="!loading && vino" class="relative min-h-screen text-white">

  <div class="absolute top-6 left-6 z-20">
    <a routerLink="/" class="w-12 h-12 bg-black/40 backdrop-blur-md rounded-full flex items-center justify-center border border-white/10 hover:bg-primary-700 transition-colors duration-300">
      <svg class="w-6 h-6 text-primary-100" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </a>
  </div>

  <div class="pt-16 pb-8 text-center animate-fade-in">
    <div class="relative inline-block animate-float">
      <div class="w-64 h-[420px] md:w-72 md:h-[480px] mx-auto rounded-2xl overflow-hidden ">
        <img *ngIf="vino.imagen?.length > 0"
             [src]="strapiUrl + vino.imagen[0].url"
             [alt]="vino.nombre"
             class="w-full h-full object-cover">
      </div>
      <div *ngIf="vino.anada" class="absolute -top-2 -right-6 bg-wine-900 text-gold-400 px-3 py-1 rounded-full text-sm font-bold shadow-md border border-wine-700">
        {{ vino.anada }}
      </div>
    </div>
  </div>

  <div class="relative z-10 container mx-auto px-4 pb-12 max-w-md">
    <div class="bg-black/50 backdrop-blur-md rounded-3xl p-6 animate-slide-up shadow-2xl border border-white/10">

      <div class="text-center mb-6">
        <h1 class="text-3xl font-serif font-bold bg-gradient-to-r from-gold-300 to-gold-800 text-primary-700 mb-2 rounded-t-xl">{{ vino.nombre }}</h1>
        <p *ngIf="vino.bodega" class="text-primary-100 text-sm tracking-wide uppercase">{{ vino.bodega }}</p>
      </div>

      <div *ngIf="vino.descripcion && vino.descripcion.length > 0 && vino.descripcion[0].children[0].text" class="bg-primary-900/40 rounded-2xl p-4 mb-4">
        <h3 class="text-primary-500 text-lg font-serif font-semibold mb-2">Descripción</h3>
        <div class="prose prose-invert text-gray-200 text-sm leading-relaxed">
          <p *ngFor="let block of vino.descripcion">
            <span *ngFor="let child of block.children">{{ child.text }}</span>
          </p>
        </div>
      </div>

      <div *ngIf="vino.notas_cata && vino.notas_cata.length > 0 && vino.notas_cata[0].children[0].text" class="bg-primary-900/40 rounded-2xl p-4 mb-4">
        <h3 class="text-primary-500 text-lg font-serif font-semibold mb-2">Notas de Cata</h3>
        <div class="prose prose-invert text-gray-200 text-sm leading-relaxed">
          <p *ngFor="let block of vino.notas_cata">
            <span *ngFor="let child of block.children">{{ child.text }}</span>
          </p>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div *ngIf="vino.cepa" class="bg-primary-900/40 rounded-2xl p-4 text-center">
          <h3 class="text-primary-500 text-sm font-medium uppercase">Cepa</h3>
          <p class="text-white font-semibold text-lg">{{ vino.cepa }}</p>
        </div>
        
        <div *ngIf="vino.anada" class="bg-primary-900/40 rounded-2xl p-4 text-center">
          <h3 class="text-primary-500 text-sm font-medium uppercase">Añada</h3>
          <p class="text-white font-semibold text-lg">{{ vino.anada }}</p>
        </div>
        
        <div *ngIf="vino.precio" class="col-span-2 flex justify-center items-center bg-primary-900/40 rounded-2xl p-4">
          <h3 class="text-primary-500 text-sm font-medium uppercase mr-2">Precio</h3>
          <span class="px-5 py-1 rounded-full bg-gradient-to-r from-gold-400 to-[#d19836] text-[#343434] font-bold text-lg shadow">
            ${{ vino.precio }}
          </span>
        </div>
      </div>

    </div>
  </div>
</div>